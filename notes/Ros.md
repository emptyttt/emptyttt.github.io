# Ros

# ✅ **ROS基础概念讲解**

ROS（Robot Operating System）并不是一个传统意义上的操作系统，而是一个**分布式的机器人开发框架**。它提供了硬件抽象、底层驱动程序、通信机制、工具和库，帮助开发者快速搭建机器人应用。

------

### 🛠️ **1. ROS核心架构**

ROS由以下几个核心概念组成：

#### 🔹 **（1）节点（Node）**

- ROS中的程序运行单元。

- 每个节点是一个独立的进程，负责执行特定功能，例如：控制电机、读取传感器数据或处理图像。

- ROS采用**分布式架构**，可以在多台计算机上运行多个节点。

- ✅ 

  示例

  - 摄像头节点：负责采集图像。
  - 图像处理节点：接收图像数据并处理。
  - 导航节点：根据图像或激光雷达数据规划路径。

------

#### 🔹 **（2）话题（Topic）**

- ROS中节点之间**异步通信**的方式。

- 节点通过**发布（publish）**和**订阅（subscribe）**话题来交换数据。

- **数据格式**：ROS消息类型（如 `std_msgs/String`、`sensor_msgs/Image` 等）。

- ✅ 

  示例

  - 摄像头节点发布图像数据到`/camera/image`话题。
  - 图像处理节点订阅`/camera/image`话题并处理图像。

------

#### 🔹 **（3）消息（Message）**

- ROS中节点之间**传输的数据格式**。

- ROS提供了多种标准消息类型：

  - `std_msgs/String` → 字符串消息。
  - `geometry_msgs/Twist` → 速度控制消息。
  - `sensor_msgs/LaserScan` → 激光雷达数据。

- ✅ 

  自定义消息

  - 可以自定义消息类型，例如包含温度和湿度的数据包。

------

#### 🔹 **（4）服务（Service）**

- ROS中的**同步通信机制**，类似于函数调用。

- 服务包括：

  - **服务端（Server）**：处理请求。
  - **客户端（Client）**：发出请求并等待响应。

- 服务通常用于**请求-响应**模型，如获取机器人位置、触发拍照等。

- ✅ 

  示例

  - 服务名：`/get_temperature`
  - 请求参数：无
  - 返回参数：当前温度值

------

#### 🔹 **（5）参数服务器（Parameter Server）**

- ROS中用于**存储和共享配置参数**的中央存储。

- 节点可以将参数上传到参数服务器，其他节点可以访问这些参数。

- 参数通常为：

  - 系统配置项（如速度限制、阈值等）。
  - 机器人模型参数。

- ✅ 

  示例

  - 存储机器人最大速度参数：

    ```bash
    rosparam set /max_speed 1.5
    ```

  - 获取参数：

    ```bash
    rosparam get /max_speed
    ```

------

### 🔧 **2. ROS工作流程**

当你启动ROS系统时，主要涉及以下组件：

1. **roscore** → ROS主进程，负责管理参数服务器和节点注册。
2. **roslaunch** → 启动多个节点。
3. **rosrun** → 单独运行某个节点。
4. **rqt_graph** → 可视化节点之间的通信拓扑。
5. **RViz** → 可视化机器人模型、传感器数据和运动轨迹。

------

### 🛠️ **3. ROS运行示例**

✅ **1. 启动ROS核心**

```bash
roscore
```

✅ **2. 运行乌龟模拟器**

```bash
rosrun turtlesim turtlesim_node
```

✅ **3. 控制乌龟移动**

```bash
rosrun turtlesim turtle_teleop_key
```

✅ **4. 查看话题**

```bash
rostopic list
```

✅ **5. 查看话题消息**

```bash
rostopic echo /turtle1/pose
```

✅ **6. 使用`rqt_graph`查看节点通信关系**

```bash
rqt_graph
```

------

### 🔥 **4. ROS核心优势**

- **模块化设计**：将机器人功能划分为多个独立节点，便于开发和测试。
- **分布式计算**：可以在多台计算机上运行节点，适合复杂机器人系统。
- **大量开源库**：如激光雷达SLAM、路径规划、视觉处理等。
- **仿真与可视化**：Gazebo和RViz提供逼真的仿真环境和直观的可视化。

------

# 使用URDF创建机器人

URDF使用XML来描述机器人的几何结构、传感器、和执行器

```
<?xml version="1.0"?>
<robot name="first_robot">
	<!-- XML注释 ——!>
	<link nmae="bae_link"></link>
</robot>
```

